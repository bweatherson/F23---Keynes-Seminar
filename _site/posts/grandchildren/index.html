<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="John Maynard Keynes">
<meta name="dcterms.date" content="2023-08-10">

<title>Keynes Seminar, Fall 2023 - Economic Possibilities for Our Grandchildren</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Keynes Seminar, Fall 2023</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Economic Possibilities for Our Grandchildren</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">readings</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>John Maynard Keynes </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 5, 1930</p>
      </div>
    </div>
    
      
    </div>
    
  <div>
    <div class="abstract">
      <div class="abstract-title">Abstract</div>
      A 1930 essay by Keynes setting out his vision for the future of the British economy. Just how much this should be thought of as a prediction or as an ideal worth striving for is one of many interpretative questions the essay raises.
    </div>
  </div>
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="i" class="level1">
<h1>I</h1>
<p>We are suffering just now from a bad attack of economic pessimism. It is common to hear people say that the epoch of enormous economic progress which characterised the nineteenth century is over; that the rapid improvement in the standard of life is now going to slow down—at any rate in Great Britain; that a decline in prosperity is more likely than an improvement in the decade which lies ahead of us.</p>
<p>I believe that this is a wildly mistaken interpretation of what is happening to us. We are suffering, not from the rheumatics of old age, but from the growing-pains of over-rapid changes, from the painfulness of readjustment between one economic period and another. The increase of technical efficiency has been taking place faster than we can deal with the problem of labour absorption; the improvement in the standard of life has been a little too quick; the banking and monetary system of the world has been preventing the rate of interest from falling as fast as equilibrium requires. And even so, the waste and confusion which ensue relate to not more than 7½ per cent of the national income; we are muddling away one and sixpence in the £, and have only 18s. 6d., when we might, if we were more sensible, have £1; yet, nevertheless, the 18s. 6d. mounts up to as much as the £1 would have been five or six years ago. We forget that in 1929 the physical output of the industry of Great Britain was greater than ever before, and that the net surplus of our foreign balance available for new foreign investment, after paying for all our imports, was greater last year than that of any other country, being indeed 50 per cent greater than the corresponding surplus of the United States. Or again—if it is to be a matter of comparisons—suppose that we were to reduce our wages by a half, repudiate four-fifths of the national debt, and hoard our surplus wealth in barren gold instead of lending it at 6 per cent or more, we should resemble the now much-envied France. But would it be an improvement?</p>
<p>The prevailing world depression, the enormous anomaly of unemployment in a world full of wants, the disastrous mistakes we have made, blind us to what is going on under the surface—to the true interpretation of the trend of things. For I predict that both of the two opposed errors of pessimism which now make so much noise in the world will be proved wrong in our own time—the pessimism of the revolutionaries who think that things are so bad that nothing can save us but violent change, and the pessimism of the reactionaries who consider the balance of our economic and social life so precarious that we must risk no experiments.</p>
<p>My purpose in this essay, however, is not to examine the present or the near future, but to disembarrass myself of short views and take wings into the future. What can we reasonably expect the level of our economic life to be a hundred years hence? What are the economic possibilities for our grandchildren?</p>
<p>From the earliest times of which we have record—back, say, to two thousand years before Christ—down to the beginning of the eighteenth century, there was no very great change in the standard of life of the average man living in the civilised centres of the earth. Ups and downs certainly. Visitations of plague, famine, and war. Golden intervals. But no progressive, violent change. Some periods perhaps 50 per cent better than others—at the utmost 100 per cent better—in the four thousand years which ended (say) in&nbsp;A.D.&nbsp;1700.</p>
<p>This slow rate of progress, or lack of progress, was due to two reasons—to the remarkable absence of important technical improvements and to the failure of capital to accumulate.</p>
<p>The absence of important technical inventions between the prehistoric age and comparatively modern times is truly remarkable. Almost everything which really matters and which the world possessed at the commencement of the modern age was already known to man at the dawn of history. Language, fire, the same domestic animals which we have to-day, wheat, barley, the vine and the olive, the plough, the wheel, the oar, the sail, leather, linen and cloth, bricks and pots, gold and silver, copper, tin, and lead—and iron was added to the list before 1000&nbsp;B.C.—banking, statecraft, mathematics, astronomy, and religion. There is no record of when we first possessed these things.</p>
<p>At some epoch before the dawn of history—perhaps even in one of the comfortable intervals before the last ice age—there must have been an era of progress and invention comparable to that in which we live to-day. But through the greater part of recorded history there was nothing of the kind.</p>
<p>The modern age opened, I think, with the accumulation of capital which began in the sixteenth century. I believe—for reasons with which I must not encumber the present argument—that this was initially due to the rise of prices, and the profits to which that led, which resulted from the treasure of gold and silver which Spain brought from the New World into the Old. From that time until to-day the power of accumulation by compound interest, which seems to have been sleeping for many generations, was re-born and renewed its strength. And the power of compound interest over two hundred years is such as to stagger the imagination.</p>
<p>Let me give in illustration of this a sum which I have worked out. The value of Great Britain’s foreign investments to-day is estimated at about £4,000,000,000. This yields us an income at the rate of about 6½ per cent. Half of this we bring home and enjoy; the other half, namely, 3¼ per cent, we leave to accumulate abroad at compound interest. Something of this sort has now been going on for about 250 years.</p>
<p>For I trace the beginnings of British foreign investment to the treasure which Drake stole from Spain in 1580. In that year he returned to England bringing with him the prodigious spoils of the&nbsp;<em>Golden Hind</em>. Queen Elizabeth was a considerable shareholder in the syndicate which had financed the expedition. Out of her share she paid off the whole of England’s foreign debt, balanced her Budget, and found herself with about £40,000 in hand. This she invested in the Levant Company—which prospered. Out of the profits of the Levant Company, the East India Company was founded; and the profits of this great enterprise were the foundation of England’s subsequent foreign investment. Now it happens that £40,000 accumulating at 3¼ per cent compound interest approximately corresponds to the actual volume of England’s foreign investments at various dates, and would actually amount to-day to the total of £4,000,000,000 which I have already quoted as being what our foreign investments now are. Thus, every £1 which Drake brought home in 1580 has now become £100,000. Such is the power of compound interest!</p>
<p>From the sixteenth century, with a cumulative crescendo after the eighteenth, the great age of science and technical inventions began, which since the beginning of the nineteenth century has been in full flood—coal, steam, electricity, petrol, steel, rubber, cotton, the chemical industries, automatic machinery and the methods of mass production, wireless, printing, Newton, Darwin, and Einstein, and thousands of other things and men too famous and familiar to catalogue.</p>
<p>What is the result? In spite of an enormous growth in the population of the world, which it has been necessary to equip with houses and machines, the average standard of life in Europe and the United States has been raised, I think, about fourfold. The growth of capital has been on a scale which is far beyond a hundred-fold of what any previous age had known. And from now on we need not expect so great an increase of population.</p>
<p>If capital increases, say, 2 per cent per annum, the capital equipment of the world will have increased by a half in twenty years, and seven and a half times in a hundred years. Think of this in terms of material things—houses, transport, and the like.</p>
<p>At the same time technical improvements in manufacture and transport have been proceeding at a greater rate in the last ten years than ever before in history. In the United States factory output per head was 40 per cent greater in 1925 than in 1919. In Europe we are held back by temporary obstacles, but even so it is safe to say that technical efficiency is increasing by more than 1 per cent per annum compound. There is evidence that the revolutionary technical changes, which have so far chiefly affected industry, may soon be attacking agriculture. We may be on the eve of improvements in the efficiency of food production as great as those which have already taken place in mining, manufacture, and transport. In quite a few years—in our own lifetimes I mean—we may be able to perform all the operations of agriculture, mining, and manufacture with a quarter of the human effort to which we have been accustomed.</p>
<p>For the moment the very rapidity of these changes is hurting us and bringing difficult problems to solve. Those countries are suffering relatively which are not in the vanguard of progress. We are being afflicted with a new disease of which some readers may not yet have heard the name, but of which they will hear a great deal in the years to come—namely,&nbsp;<em>technological unemployment</em>. This means unemployment due to our discovery of means of economising the use of labour outrunning the pace at which we can find new uses for labour.</p>
<p>But this is only a temporary phase of maladjustment. All this means in the long run&nbsp;<em>that mankind is solving its economic problem</em>. I would predict that the standard of life in progressive countries one hundred years hence will be between four and eight times as high as it is to-day. There would be nothing surprising in this even in the light of our present knowledge. It would not be foolish to contemplate the possibility of a far greater progress still.</p>
</section>
<section id="ii" class="level1">
<h1>II</h1>
<p>Let us, for the sake of argument, suppose that a hundred years hence we are all of us, on the average, eight times better off in the economic sense than we are to-day. Assuredly there need be nothing here to surprise us.</p>
<p>Now it is true that the needs of human beings may seem to be insatiable. But they fall into two classes—those needs which are absolute in the sense that we feel them whatever the situation of our fellow human beings may be, and those which are relative in the sense that we feel them only if their satisfaction lifts us above, makes us feel superior to, our fellows. Needs of the second class, those which satisfy the desire for superiority, may indeed be insatiable; for the higher the general level, the higher still are they. But this is not so true of the absolute needs—a point may soon be reached, much sooner perhaps than we are all of us aware of, when these needs are satisfied in the sense that we prefer to devote our further energies to non-economic purposes.</p>
<p>Now for my conclusion, which you will find, I think, to become more and more startling to the imagination the longer you think about it.</p>
<p>I draw the conclusion that, assuming no important wars and no important increase in population, the&nbsp;<em>economic problem</em>&nbsp;may be solved, or be at least within sight of solution, within a hundred years. This means that the economic problem is not—if we look into the future—<em>the permanent problem of the human race</em>.</p>
<p>Why, you may ask, is this so startling? It is startling because—if, instead of looking into the future, we look into the past—we find that the economic problem, the struggle for subsistence, always has been hitherto the primary, most pressing problem of the human race—not only of the human race, but of the whole of the biological kingdom from the beginnings of life in its most primitive forms.</p>
<p>Thus we have been expressly evolved by nature—with all our impulses and deepest instincts—for the purpose of solving the economic problem. If the economic problem is solved, mankind will be deprived of its traditional purpose.</p>
<p>Will this be a benefit? If one believes at all in the real values of life, the prospect at least opens up the possibility of benefit. Yet I think with dread of the readjustment of the habits and instincts of the ordinary man, bred into him for countless generations, which he may be asked to discard within a few decades.</p>
<p>To use the language of to-day—must we not expect a general “nervous breakdown”? We already have a little experience of what I mean—a nervous breakdown of the sort which is already common enough in England and the United States amongst the wives of the well-to-do classes, unfortunate women, many of them, who have been deprived by their wealth of their traditional tasks and occupations—who cannot find it sufficiently amusing, when deprived of the spur of economic necessity, to cook and clean and mend, yet are quite unable to find anything more amusing.</p>
<p>To those who sweat for their daily bread leisure is a longed-for sweet—until they get it.</p>
<p>There is the traditional epitaph written for herself by the old charwoman:—</p>
<blockquote class="blockquote">
<p>Don’t mourn for me, friends, don’t weep for me never,<br>
For I’m going to do nothing for ever and ever.</p>
</blockquote>
<p>This was her heaven. Like others who look forward to leisure, she conceived how nice it would be to spend her time listening-in—for there was another couplet which occurred in her poem:—</p>
<blockquote class="blockquote">
<p>With psalms and sweet music the heavens’ll be ringing,<br>
But I shall have nothing to do with the singing.</p>
</blockquote>
<p>Yet it will only be for those who have to do with the singing that life will be tolerable—and how few of us can sing!</p>
<p>Thus for the first time since his creation man will be faced with his real, his permanent problem—how to use his freedom from pressing economic cares, how to occupy the leisure, which science and compound interest will have won for him, to live wisely and agreeably and well.</p>
<p>The strenuous purposeful money-makers may carry all of us along with them into the lap of economic abundance. But it will be those peoples, who can keep alive, and cultivate into a fuller perfection, the art of life itself and do not sell themselves for the means of life, who will be able to enjoy the abundance when it comes.</p>
<p>Yet there is no country and no people, I think, who can look forward to the age of leisure and of abundance without a dread. For we have been trained too long to strive and not to enjoy. It is a fearful problem for the ordinary person, with no special talents, to occupy himself, especially if he no longer has roots in the soil or in custom or in the beloved conventions of a traditional society. To judge from the behaviour and the achievements of the wealthy classes to-day in any quarter of the world, the outlook is very depressing! For these are, so to speak, our advance guard—those who are spying out the promised land for the rest of us and pitching their camp there. For they have most of them failed disastrously, so it seems to me—those who have an independent income but no associations or duties or ties—to solve the problem which has been set them.</p>
<p>I feel sure that with a little more experience we shall use the new-found bounty of nature quite differently from the way in which the rich use it to-day, and will map out for ourselves a plan of life quite otherwise than theirs.</p>
<p>For many ages to come the old Adam will be so strong in us that everybody will need to do&nbsp;<em>some</em>&nbsp;work if he is to be contented. We shall do more things for ourselves than is usual with the rich to-day, only too glad to have small duties and tasks and routines. But beyond this, we shall endeavour to spread the bread thin on the butter—to make what work there is still to be done to be as widely shared as possible. Three-hour shifts or a fifteen-hour week may put off the problem for a great while. For three hours a day is quite enough to satisfy the old Adam in most of us!</p>
<p>There are changes in other spheres too which we must expect to come. When the accumulation of wealth is no longer of high social importance, there will be great changes in the code of morals. We shall be able to rid ourselves of many of the pseudo-moral principles which have hag-ridden us for two hundred years, by which we have exalted some of the most distasteful of human qualities into the position of the highest virtues. We shall be able to afford to dare to assess the money-motive at its true value. The love of money as a possession—as distinguished from the love of money as a means to the enjoyments and realities of life—will be recognised for what it is, a somewhat disgusting morbidity, one of those semi-criminal, semi-pathological propensities which one hands over with a shudder to the specialists in mental disease. All kinds of social customs and economic practices, affecting the distribution of wealth and of economic rewards and penalties, which we now maintain at all costs, however distasteful and unjust they may be in themselves, because they are tremendously useful in promoting the accumulation of capital, we shall then be free, at last, to discard.</p>
<p>Of course there will still be many people with intense, unsatisfied purposiveness who will blindly pursue wealth—unless they can find some plausible substitute. But the rest of us will no longer be under any obligation to applaud and encourage them. For we shall inquire more curiously than is safe to-day into the true character of this “purposiveness” with which in varying degrees Nature has endowed almost all of us. For purposiveness means that we are more concerned with the remote future results of our actions than with their own quality or their immediate effects on our own environment. The “purposive” man is always trying to secure a spurious and delusive immortality for his acts by pushing his interest in them forward into time. He does not love his cat, but his cat’s kittens; nor, in truth, the kittens, but only the kittens’ kittens, and so on forward for ever to the end of cat-dom. For him jam is not jam unless it is a case of jam to-morrow and never jam to-day. Thus by pushing his jam always forward into the future, he strives to secure for his act of boiling it an immortality.</p>
<p>Let me remind you of the Professor in&nbsp;<em>Sylvie and Bruno</em>:—</p>
<blockquote class="blockquote">
<p>“Only the tailor, sir, with your little bill,” said a meek voice outside the door.</p>
<p>“Ah, well, I can soon settle&nbsp;<em>his</em>&nbsp;business,” the Professor said to the children, “if you’ll just wait a minute. How much is it, this year, my man?” The tailor had come in while he was speaking.</p>
<p>“Well, it’s been a-doubling so many years, you see,” the tailor replied, a little gruffly, “and I think I’d like the money now. It’s two thousand pound, it is!”</p>
<p>“Oh, that’s nothing!” the Professor carelessly remarked, feeling in his pocket, as if he always carried at least&nbsp;<em>that</em>&nbsp;amount about with him. “But wouldn’t you like to wait just another year and make it&nbsp;<em>four</em>&nbsp;thousand? Just think how rich you’d be! Why, you might be a&nbsp;<em>king</em>, if you liked!”</p>
<p>“I don’t know as I’d care about being a king,” the man said thoughtfully. “But it&nbsp;<em>dew</em>sound a powerful sight o’ money! Well, I think I’ll wait——”</p>
<p>“Of course you will!” said the Professor. “There’s good sense in&nbsp;<em>you</em>, I see. Good-day to you, my man!”</p>
<p>“Will you ever have to pay him that four thousand pounds?” Sylvie asked as the door closed on the departing creditor.</p>
<p>“<em>Never</em>, my child!” the Professor replied emphatically. “He’ll go on doubling it till he dies. You see, it’s&nbsp;<em>always</em>&nbsp;worth while waiting another year to get twice as much money!”</p>
</blockquote>
<p>Perhaps it is not an accident that the race which did most to bring the promise of immortality into the heart and essence of our religions has also done most for the principle of compound interest and particularly loves this most purposive of human institutions.</p>
<p>I see us free, therefore, to return to some of the most sure and certain principles of religion and traditional virtue—that avarice is a vice, that the exaction of usury is a misdemeanour, and the love of money is detestable, that those walk most truly in the paths of virtue and sane wisdom who take least thought for the morrow. We shall once more value ends above means and prefer the good to the useful. We shall honour those who can teach us how to pluck the hour and the day virtuously and well, the delightful people who are capable of taking direct enjoyment in things, the lilies of the field who toil not, neither do they spin.</p>
<p>But beware! The time for all this is not yet. For at least another hundred years we must pretend to ourselves and to every one that fair is foul and foul is fair; for foul is useful and fair is not. Avarice and usury and precaution must be our gods for a little longer still. For only they can lead us out of the tunnel of economic necessity into daylight.</p>
<p>I look forward, therefore, in days not so very remote, to the greatest change which has ever occurred in the material environment of life for human beings in the aggregate. But, of course, it will all happen gradually, not as a catastrophe. Indeed, it has already begun. The course of affairs will simply be that there will be ever larger and larger classes and groups of people from whom problems of economic necessity have been practically removed. The critical difference will be realised when this condition has become so general that the nature of one’s duty to one’s neighbour is changed. For it will remain reasonable to be economically purposive for others after it has ceased to be reasonable for oneself.</p>
<p>The&nbsp;<em>pace</em>&nbsp;at which we can reach our destination of economic bliss will be governed by four things—our power to control population, our determination to avoid wars and civil dissensions, our willingness to entrust to science the direction of those matters which are properly the concern of science, and the rate of accumulation as fixed by the margin between our production and our consumption; of which the last will easily look after itself, given the first three.</p>
<p>Meanwhile there will be no harm in making mild preparations for our destiny, in encouraging, and experimenting in, the arts of life as well as the activities of purpose.</p>
<p>But, chiefly, do not let us overestimate the importance of the economic problem, or sacrifice to its supposed necessities other matters of greater and more permanent significance. It should be a matter for specialists—like dentistry. If economists could manage to get themselves thought of as humble, competent people, on a level with dentists, that would be splendid!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>